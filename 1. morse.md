Morse avec Arduino
==================

Eclairer
=======

Dans l'exemple Blink, nous voyons que `digitalWrite` permet
de changer l'√©tat d'un `pin`.

```
void loop() {
    digitalWrite(13, HIGH); // allumer le pin 13
    delay(1000); // attendre 1 seconde
    digitalWrite(13, LOW); // eteindre le pin 13
    delay(1000); // attendre 1 seconde
}
```

Pour le premier exercice, nous allons cr√©er une `fonction`
qui va s'appeller "eclairer" et qui nous permettra d'allumer
facilement le pin 13 pendant 500 millisecondes.

Mais c'est quoi une fonction ? Une fonction c'est un morceau
de code que l'on pourra facilement r√©utiliser plusieurs fois
dans notre programme. Ca √©vite de se r√©peter et ca permet de
mieux comprendre comment le programme marche.

Le but de la fonction `eclairer` sera d'allumer la diode,
de laisser la diode allum√©e pendant un certain temps, puis
de l'√©teindre.

Avec `digitalWrite(13, LOW)`, `digitalWrite(13, HIGH)` et
`delay`, vous avez avec vous tous les outils pour cr√©er cette fonction. Pour vous faciliter la t√¢che, j'ai √©crit le
squelette de la fonction ici:

```
void eclairer() {
    // ecrire le code la fonction ici
}
```

A vous de jouer !

‚úÖ Solution

```
void eclairer() {
    digitalWrite(13, HIGH); // allumer la diode
    delay(500); // attendre 500 ms
    digitalWrite(13, LOW); // eteindre la diode
}
```

Eclairer 2 : les param√®tres 
===========================

Cool ! Maintenant on peut allumer la lampe facilement üî•‚òÄüî•Ô∏è

On peut facilement allumer la diode
pendant 500ms. Mais que se passe-t-il si l'on veut
allumer la diode pendant 50ms ou alors 100ms ou 500ms ?

On pourrait copier-coller `eclairer` et changer la dur√©e
d'attente √† chaque fois :

```
void eclairer_500() {
    digitalWrite(13, HIGH); // allumer la diode
    delay(500); // attendre 500 ms
    digitalWrite(13, LOW); // eteindre la diode
}

void eclairer_50() {
    digitalWrite(13, HIGH); // allumer la diode
    delay(50); // attendre 50 ms
    digitalWrite(13, LOW); // eteindre la diode
}

void eclairer_100() {
    digitalWrite(13, HIGH); // allumer la diode
    delay(100); // attendre 100 ms
    digitalWrite(13, LOW); // eteindre la diode
}
```

Ca commence d√©j√† √† faire pas mal de code üìùüìùüìù... Et puis, on
va devoir si on veut eclairer pendant seulement 200ms, on
va devoir encore copier-coller une fonction.

Le mieux serait que l'on puisse dire √† `eclairer` d'eclairer
pendant un certain temps comme on dit √† `delay` d'attendre un
certain temps.

```
delay(50); // attendre 50ms
delay(500); // attendre 500ms
delay(100); // attendre 100ms
```

Comment fait-on cela ? En utilisant ce qu'on appelle des *param√®tres* !

Voici la version d'`eclairer` avec des param√®tres :

```
void eclairer (int duree) {
    digitalWrite(13, HIGH); // allumer la diode
    delay(duree); // attendre `duree` ms
    digitalWrite(13, LOW); // eteindre la diode
}
```

Et voici comment l'utiliser :

```
eclairer(500); // eclaire pendant 500ms
eclairer(200); // eclaire pendant 200ms
eclairer(25); // eclaire pendant 25ms
```

C'est beaucoup plus simple que de copier coller plein de fois
le m√™me code üòé !

On a rajout√© le *param√®tre* `duree` de *type* `int`. Il est
maintenant disponible √† l'int√©rieur de la fonction et est
remplac√© lorsqu'on *appelle* la *fonction*.

```
eclairer(500);
```

est √©quivalent √†:

```
digitalWrite(13, HIGH); // allumer la diode
delay(500); // attendre 500 ms
digitalWrite(13, LOW); // eteindre la diode
```

maintenant !

### Exercice

Modifier la fonction `eclairer` pour qu'elle √©claire 2
fois plus longtemps que la dur√©e qu'on lui donne.

Rappel: Pour multiplier, on utilise une √©toile : `*`.

```
int a = 4;
int b = 2 * a; // ici b sera √©gal √† 8
```

‚úÖ Solution de l'exercice:

```
void eclairer (int duree) {
    digitalWrite(13, HIGH);
    delay(2 * duree);
    digitalWrite(13, LOW);
}
```

### Exercice

Remplir les trous :

```
int DUREE_TI = 50;
int DUREE_TA = 3 * DUREE_TI;

void ti() {
    ____________
}

void ta() {
    ____________
}

```

Lorsqu'on appelle `ti`, il faut que la diode
s'allume pendant 50ms. Attention, n'utilisez pas 50ms
directement dans la fonction ti ! Vous pouvez utiliser
les variables d√©j√† d√©finies...

Lorsqu'on appelle `ta`, il faut que la diode
s'allume 3 fois plus longtemps que pour le `ti`.

‚úÖ Solution

```
void ti() {
    eclairer(DUREE_TI);
}


void ta() {
    eclairer(DUREE_TA);
}
```

Ne vous inqui√©tez pas si tout n'est pas encore tr√®s clair
pour vous, ca va venir...

On va revoir un peu les d√©finitions:

`variable` : une variable est comme une boite ou l'on met une valeur

```
int a = 1; // on peut maintenant utiliser "a" autre part dans le code
```

`type`: permet de dire le type de boite qu'on utilise pour une variable.
En informatique, si on a choisit que `a` √©tait une bo√Æte pour contenir
des nombres, on ne va pas pouvoir mettre des lettres √† l'int√©rieur.

Voici les types que l'on a d√©j√† pu rencontrer jusqu'√† pr√©sent :

* `void` : utilis√© avant les `fonctions`

* `int`: permet de faire des variables qui vont contenir des nombres


`fonction`: contient du code que l'on va pouvoir appeller plus tard.
Les fonctions sont les briques de l'informatique. L'Arduino conna√Æt
d√©j√† des fonctions de base comme `digitalWrite` et nous cr√©ons des
fonctions √† partir des ces fonctions pour nous permettre de construire
des programmes qui permettent de faire des choses de plus en plus
compliqu√© !

`param√®tre`: permet de faire varier le comportement d'une fonction. Le
premier exemple de fonction que l'on a vu avec un param√®tre, c'est 
`delay` qui *prend en param√®tre* le temps d'attente. `digitalWrite`, elle, prend 2 param√®tre : le num√©ro du pin que l'on veut changer et la
valeur que l'on veut que le pin prenne.

SOS
===

On a maintenant les briques de bases, le `ti` et le `ta`
qui permettent allumer la diode. On peut d√©j√† commencer √† √©mettre
l'un des signaux les plus connus du Morse !

```
¬∑ ¬∑ ¬∑ ‚Äî ‚Äî ‚Äî ¬∑ ¬∑ ¬∑
```

En morse, ce signal veut dire SOS et si vous le voyez √©mis par
quelqu'un, cela signifie que cette personne a besoin d'aide (ou alors
qu'elle est en train, comme vous, de programmer un Arduino...).

### Exercice

Remplir la fonction SOS:

```
void SOS () {
    ti();
    ti();
    ti();
    ________
    ________
    ________
    ________
    ________
    ________
}
```


